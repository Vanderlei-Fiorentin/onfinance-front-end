<div class="header">
    <h1 class="header-title">
        Visão geral do Analytics
    </h1>
    <p class="header-subtitle">Suas despesas e receitas do mês atual.</p>
</div>

<div class="row">
    <div class="col-xl-6 col-xxl-5 d-flex">
        <div class="w-100">
            <div class="row">
                <div class="col-sm-6">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col mt-0">
                                    <h5 class="card-title">Receitas</h5>
                                </div>
                                <div class="col-auto">
                                    <div class="avatar">
                                        <div class="avatar-title rounded-circle bg-primary-dark">
                                            <i class="fa fa-dollar-sign"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <h1 class="display-5 mt-2 mb-4">
                                {{ dashboard.getTotalReceitas() | currency:'R$' }}
                            </h1>
                            <div class="mb-0">
                                <span [ngClass]="dashboard.getPercDiferencaReceitasMesAnterior() > 0 && 'text-success' || 'text-danger'"> 
                                    <i class="mdi mdi-arrow-bottom-right"></i> 
                                    {{ dashboard.getPercDiferencaReceitasMesAnterior().toFixed(2) }}% 
                                </span>
                                {{ dashboard.getDescricaoPercReceitas() }}
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col mt-0">
                                    <h5 class="card-title">Receitas a receber</h5>
                                </div>
                                <div class="col-auto">
                                    <div class="avatar">
                                        <div class="avatar-title rounded-circle bg-primary-dark">
                                            <i class="fa fa-dollar-sign"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <h1 class="display-5 mt-2 mb-4">
                                {{ dashboard.totalEntradasAVencer | currency:'R$' }}
                            </h1>
                            <div class="mb-0">
                                <span class="text-success"> <i class="mdi mdi-arrow-bottom-right"></i></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col mt-0">
                                    <h5 class="card-title">Despesas</h5>
                                </div>
                                <div class="col-auto">
                                    <div class="avatar">
                                        <div class="avatar-title rounded-circle bg-primary-dark">
                                            <i class="fa fa-dollar-sign"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <h1 class="display-5 mt-2 mb-4">
                                {{ dashboard.getTotalDespesas() | currency:'R$' }}
                            </h1>
                            <div class="mb-0">
                                <span [ngClass]="dashboard.getPercDiferencaDespesasMesAnterior() > 0 && 'text-success' || 'text-danger'"> 
                                    <i class="mdi mdi-arrow-bottom-right"></i> 
                                    {{ dashboard.getPercDiferencaDespesasMesAnterior().toFixed(2) }}% 
                                </span>
                                {{ dashboard.getDescricaoPercDespesas() }}
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col mt-0">
                                    <h5 class="card-title">Despesas a pagar</h5>
                                </div>
                                <div class="col-auto">
                                    <div class="avatar">
                                        <div class="avatar-title rounded-circle bg-primary-dark">
                                            <i class="fa fa-dollar-sign"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <h1 class="display-5 mt-2 mb-4">
                                {{ dashboard.totalSaidasAVencer | currency:'R$' }}
                            </h1>
                            <div class="mb-0">
                                <span class="text-danger"> <i class="mdi mdi-arrow-bottom-right"></i></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-6 col-xxl-7 d-flex">
        <div class="card flex-fill w-100">
            <div class="card-header">
                <div class="card-actions float-end">
                    <a href="#" class="me-1">
                        <i class="align-middle" data-feather="refresh-cw"></i>
                    </a>
                    <div class="d-inline-block dropdown show">
                        <a href="#" data-bs-toggle="dropdown" data-bs-display="static">
                            <i class="align-middle" data-feather="more-vertical"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end">
                            <a class="dropdown-item" href="#">Action</a>
                            <a class="dropdown-item" href="#">Another action</a>
                            <a class="dropdown-item" href="#">Something else here</a>
                        </div>
                    </div>
                </div>
                <h5 class="card-title mb-0"> {{ graficoProjecaoProximos12Meses.title }} </h5>
            </div>
            <div class="card-body px-4">
                <google-chart #chart [title]=""
                    [type]="graficoProjecaoProximos12Meses.type" 
                    [data]="graficoProjecaoProximos12Meses.data"
                    [columns]="graficoProjecaoProximos12Meses.columnNames"
                    [options]="graficoProjecaoProximos12Meses.options" 
                    style="width: 100%; height:100%;">
                </google-chart>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12 col-md-6 col-xxl-5 d-flex">
        <div class="card flex-fill w-100">
            <div class="card-header">
                <div class="card-actions float-end">
                    <a href="#" class="me-1">
                        <i class="align-middle" data-feather="refresh-cw"></i>
                    </a>
                    <div class="d-inline-block dropdown show">
                        <a href="#" data-bs-toggle="dropdown" data-bs-display="static">
                            <i class="align-middle" data-feather="more-vertical"></i>
                        </a>

                        <div class="dropdown-menu dropdown-menu-end">
                            <a class="dropdown-item" href="#">Action</a>
                            <a class="dropdown-item" href="#">Another action</a>
                            <a class="dropdown-item" href="#">Something else here</a>
                        </div>
                    </div>
                </div>
                <h5 class="card-title mb-0"> {{ graficoDespesasPorCategoria.title }} </h5>
            </div>
            <div class="card-body px-4">
                <google-chart #chart [title]=""
                                [type]="graficoDespesasPorCategoria.type" [data]="graficoDespesasPorCategoria.data"
                                [columns]="graficoDespesasPorCategoria.columnNames"
                                [options]="graficoDespesasPorCategoria.options" style="width: 100%; height:600px;">
                </google-chart>
            </div>
        </div>
    </div>
    <div class="col-12 col-md-12 col-xxl-7 d-flex">
        <div class="card flex-fill w-100">
            <div class="card-header">
                <div class="card-actions float-end">
                    <a href="#" class="me-1">
                        <i class="align-middle" data-feather="refresh-cw"></i>
                    </a>
                    <div class="d-inline-block dropdown show">
                        <a href="#" data-bs-toggle="dropdown" data-bs-display="static">
                            <i class="align-middle" data-feather="more-vertical"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end">
                            <a class="dropdown-item" href="#">Action</a>
                            <a class="dropdown-item" href="#">Another action</a>
                            <a class="dropdown-item" href="#">Something else here</a>
                        </div>
                    </div>
                </div>
                <h5 class="card-title mb-0">Cartões de crédito</h5>
            </div>
            <table class="table table-striped my-0">
                <thead>
                    <tr>
                        <th class="text-center">Bandeira</th>
                        <th class="text-center">Cliente</th>
                        <th class="text-center">Cartão de crédito</th>
                        <th class="text-center">Status</th>
                        <th class="text-center">Limite utilizado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let cartao of cartoes">
                        <td>
                            <img width="30" height="30" class="rounded-circle" src="{{urlFiles + cartao.bandeira.logo}}"
                                alt="">
                        </td>
                        <td class="text-center">{{ cartao.conta.usuario.nome }}</td>
                        <td class="text-center">{{ cartao.conta.agencia.banco.nome + " - XXXXXXXXXXXX" + cartao.numero
                            }}</td>
                        <td class="text-center">
                            <span class="badge bg-success" *ngIf="cartao.ativo == true">Ativo</span>
                            <span class="badge bg-danger" *ngIf="cartao.ativo == false">Cancelado</span>
                        </td>
                        <td class="d-none d-xl-table-cell">
                            <div class="progress">
                                <div class="progress-bar bg-primary-dark" role="progressbar" aria-valuenow="43"
                                    aria-valuemin="0" aria-valuemax="100"
                                    [ngStyle]="{ width:  ((cartao.limiteUtilizado / cartao.limite) * 100).toFixed(2) + '%'}"
                                    title="{{ cartao.limiteUtilizado | currency:'R$' }}">
                                    {{ ((cartao.limiteUtilizado / cartao.limite) * 100).toFixed(2) }}%
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12 col-lg-7 col-xl-8 d-flex">
        <div class="card flex-fill w-100">
            <div class="card-header">
                <div class="card-actions float-end">
                    <a href="#" class="me-1">
                        <i class="align-middle" data-feather="refresh-cw"></i>
                    </a>
                    <div class="d-inline-block dropdown show">
                        <a href="#" data-bs-toggle="dropdown" data-bs-display="static">
                            <i class="align-middle" data-feather="more-vertical"></i>
                        </a>

                        <div class="dropdown-menu dropdown-menu-end">
                            <a class="dropdown-item" href="#">Action</a>
                            <a class="dropdown-item" href="#">Another action</a>
                            <a class="dropdown-item" href="#">Something else here</a>
                        </div>
                    </div>
                </div>
                <h5 class="card-title mb-0"> {{ graficoReceitasDespesas.title }} </h5>
            </div>
            <div class="card-body px-4">
                <google-chart #chart [title]=""
                                [type]="graficoReceitasDespesas.type" [data]="graficoReceitasDespesas.data"
                                [columns]="graficoReceitasDespesas.columnNames"
                                [options]="graficoReceitasDespesas.options" style="width: 100%; height:100%;">
                </google-chart>
            </div>
        </div>

    </div>
    <div class="col-12 col-lg-5 col-xl-4 d-flex"></div>
</div>